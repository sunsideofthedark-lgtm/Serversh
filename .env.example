# =============================================================================
# ServerSH Environment Configuration
# =============================================================================
# Kopiere diese Datei als .env und passe die Werte an
# Diese Datei enthält alle Konfigurationsoptionen für die vollständige Automatisierung

# =============================================================================
# SYSTEM KONFIGURATION
# =============================================================================

# System Update Konfiguration
SERVERSH_UPDATE_AUTO=true
SERVERSH_UPDATE_SECURITY_ONLY=false
SERVERSH_UPDATE_CLEANUP=true

# Hostname Konfiguration
SERVERSH_HOSTNAME=myserver
SERVERSH_FQDN=myserver.example.com
SERVERSH_HOSTNAME_UPDATE_HOSTS=true
SERVERSH_HOSTNAME_VALIDATE_DNS=false

# =============================================================================
# BENUTZER KONFIGURATION
# =============================================================================

# Hauptbenutzer erstellen
SERVERSH_CREATE_USER=true
SERVERSH_USERNAME=admin
SERVERSH_USER_PASSWORD=SecurePassword123!
SERVERSH_USER_SSH_KEY=true
SERVERSH_USER_SUDO=true
SERVERSH_USER_SHELL=/bin/bash

# Zusätzliche SSH Public Keys (kommagetrennt)
SERVERSH_ADDITIONAL_SSH_KEYS="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDC... user@example.com,ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIC... another@example.com"

# =============================================================================
# SSH SICHERHEIT KONFIGURATION
# =============================================================================

# SSH Grundkonfiguration
SERVERSH_SSH_ENABLE=true
SERVERSH_SSH_INTERACTIVE_PORT=true
SERVERSH_SSH_PREFERRED_PORT=2222
SERVERSH_SSH_AUTO_SELECT_PORT=true
SERVERSH_SSH_SCAN_RANGES="2000-2999,4000-4999,5000-5999,6000-6999,7000-7999,8000-8999,9000-9999"

# SSH Sicherheitseinstellungen
SERVERSH_SSH_PERMIT_ROOT_LOGIN=no
SERVERSH_SSH_PASSWORD_AUTHENTICATION=no
SERVERSH_SSH_PERMIT_EMPTY_PASSWORDS=no
SERVERSH_SSH_X11_FORWARDING=no
SERVERSH_SSH_CLIENT_ALIVE_INTERVAL=300
SERVERSH_SSH_CLIENT_ALIVE_COUNT_MAX=2
SERVERSH_SSH_MAX_AUTH_TRIES=3
SERVERSH_SSH_MAX_SESSIONS=10

# SSH Port-Einstellungen (wenn interaktiv deaktiviert)
SERVERSH_SSH_PORT=22
SERVERSH_SSH_BACKUP_CONFIG=true

# =============================================================================
# FIREWALL KONFIGURATION
# =============================================================================

# Firewall Einstellungen
SERVERSH_FIREWALL_ENABLE=true
SERVERSH_FIREWALL_TYPE=auto
SERVERSH_FIREWALL_DEFAULT_POLICY=deny
SERVERSH_FIREWALL_ALLOW_SSH=true
SERVERSH_FIREWALL_LOG_RULES=true

# Zusätzliche erlaubte Ports (Format: port/protocol,kommagetrennt)
SERVERSH_FIREWALL_ALLOWED_PORTS="80/tcp,443/tcp"
# Beispiel für Webserver: "80/tcp,443/tcp"
# Beispiel für Datenbank: "3306/tcp,5432/tcp,6379/tcp,9200/tcp"
# Beispiel für DNS: "53/tcp,53/udp"

# =============================================================================
# DOCKER KONFIGURATION
# =============================================================================

# Docker Installation
SERVERSH_DOCKER_ENABLE=true
SERVERSH_DOCKER_VERSION=latest
SERVERSH_DOCKER_INSTALL_COMPOSE=true
SERVERSH_DOCKER_COMPOSE_VERSION=latest
SERVERSH_DOCKER_USER=admin

# Docker Netzwerk-Konfiguration (aus deinem alten Script)
SERVERSH_DOCKER_NETWORK_MTU=1450
SERVERSH_DOCKER_NETWORK_IPV6=true
SERVERSH_DOCKER_NETWORK_NAME=newt_talk
SERVERSH_DOCKER_IPV6_SUBNET=2001:db8:1::/64
SERVERSH_DOCKER_IP_POOL=172.25.0.0/16
SERVERSH_DOCKER_IP_POOL_SIZE=24

# Docker Daemon Konfiguration
SERVERSH_DOCKER_LOG_LEVEL=info
SERVERSH_DOCKER_STORAGE_DRIVER=overlay2
SERVERSH_DOCKER_EXPERIMENTAL=false

# =============================================================================
# PROMETHEUS MONITORING KONFIGURATION
# =============================================================================

# Prometheus Installation
SERVERSH_PROMETHEUS_ENABLE=true
SERVERSH_PROMETHEUS_VERSION=latest
SERVERSH_PROMETHEUS_PORT=9090
SERVERSH_PROMETHEUS_RETENTION=15d
SERVERSH_PROMETHEUS_STORAGE_PATH=/var/lib/prometheus
SERVERSH_PROMETHEUS_ENABLE_SERVICE=true

# Node Exporter
SERVERSH_NODE_EXPORTER_ENABLE=true
SERVERSH_NODE_EXPORTER_VERSION=latest
SERVERSH_NODE_EXPORTER_PORT=9100

# =============================================================================
# INSTALLATIONS KONFIGURATION
# =============================================================================

# Allgemeine Installationseinstellungen
SERVERSH_AUTO_BACKUP=true
SERVERSH_VERIFICATION=true
SERVERSH_ROLLBACK_ON_ERROR=true
SERVERSH_LOG_LEVEL=INFO
SERVERSH_PARALLEL_INSTALL=false
SERVERSH_DRY_RUN=false

# Installations-Modul-Reihenfolge (kommagetrennt)
SERVERSH_MODULE_ORDER="system/update,system/hostname,security/users,security/ssh,security/firewall,container/docker,monitoring/prometheus,backup/backup_recovery,applications/optional_software"

# =============================================================================
# SOFTWARE KONFIGURATION (Zusätzliche Pakete)
# =============================================================================

# Zusätzliche Systempakete (kommagetrennt)
SERVERSH_ADDITIONAL_PACKAGES="htop,vim,git,curl,wget,unzip,tree,ncdu,rsync"

# Entwicklungstools
SERVERSH_DEV_TOOLS=false
SERVERSH_DEV_PACKAGES="build-essential,python3,python3-pip,nodejs,npm"

# Datenbank-Server
SERVERSH_INSTALL_MYSQL=false
SERVERSH_INSTALL_POSTGRESQL=false
SERVERSH_INSTALL_REDIS=false

# Webserver
SERVERSH_INSTALL_NGINX=false
SERVERSH_INSTALL_APACHE=false

# =============================================================================
# NETZWERK KONFIGURATION
# =============================================================================

# Netzwerk-Interface Konfiguration
SERVERSH_NETWORK_INTERFACE=eth0
SERVERSH_NETWORK_DNS_AUTO=true
SERVERSH_NETWORK_DNS_SERVERS="8.8.8.8,1.1.1.1"

# IPv6 Konfiguration
SERVERSH_IPV6_ENABLE=true
SERVERSH_IPV6_AUTOCONF=true

# =============================================================================
# SICHERHEIT KONFIGURATION
# =============================================================================

# Fail2ban Installation
SERVERSH_INSTALL_FAIL2BAN=true
SERVERSH_FAIL2BAN_MAXRETRY=3
SERVERSH_FAIL2BAN_FINDTIME=600
SERVERSH_FAIL2BAN_BANTIME=3600
SERVERSH_FAIL2BAN_DESTEMAIL=admin@example.com
SERVERSH_FAIL2BAN_SENDMAIL=true
SERVERSH_FAIL2BAN_ACTION="%(action_mw)s"

# Automatische Security Updates
SERVERSH_AUTO_SECURITY_UPDATES=true
SERVERSH_AUTO_UPDATE_MAIL=admin@example.com

# =============================================================================
# BACKUP & RECOVERY KONFIGURATION
# =============================================================================

# Backup Grundkonfiguration
SERVERSH_BACKUP_ENABLE=false
SERVERSH_BACKUP_BASE_DIR=/backup
SERVERSH_BACKUP_SCHEDULE="0 2 * * *"
SERVERSH_BACKUP_RETENTION_DAYS=30
SERVERSH_BACKUP_TYPES="full"
SERVERSH_BACKUP_SOURCES="/etc,/home,/var/www,/opt,/var/lib,/usr/local"

# Backup Kompression und Verschlüsselung
SERVERSH_BACKUP_COMPRESSION=gzip
SERVERSH_BACKUP_ENCRYPTION=false
SERVERSH_BACKUP_ENCRYPTION_KEY=""

# Backup Performance
SERVERSH_BACKUP_PARALLEL_JOBS=2
SERVERSH_BACKUP_VERIFY=true
SERVERSH_BACKUP_ENABLE_SCHEDULE=false

# Backup Benachrichtigungen
SERVERSH_BACKUP_EMAIL_REPORTS=false
SERVERSH_BACKUP_EMAIL_TO=admin@example.com

# Remote Backup Konfiguration
SERVERSH_BACKUP_REMOTE_ENABLE=false
SERVERSH_BACKUP_REMOTE_TYPE=rsync
SERVERSH_BACKUP_REMOTE_HOST=
SERVERSH_BACKUP_REMOTE_USER=
SERVERSH_BACKUP_REMOTE_PATH=/remote/backups

# S3 Backup Konfiguration
SERVERSH_BACKUP_S3_ENABLE=false
SERVERSH_BACKUP_S3_BUCKET=
SERVERSH_BACKUP_S3_REGION=
SERVERSH_BACKUP_S3_ACCESS_KEY=
SERVERSH_BACKUP_S3_SECRET_KEY=

# Datenbank-Backups
SERVERSH_BACKUP_DATABASES_ENABLE=false
SERVERSH_BACKUP_MYSQL_ENABLE=false
SERVERSH_BACKUP_MYSQL_USER=root
SERVERSH_BACKUP_MYSQL_PASSWORD=
SERVERSH_BACKUP_MYSQL_DATABASES=all

SERVERSH_BACKUP_POSTGRESQL_ENABLE=false
SERVERSH_BACKUP_POSTGRESQL_USER=postgres
SERVERSH_BACKUP_POSTGRESQL_PASSWORD=
SERVERSH_BACKUP_POSTGRESQL_DATABASES=all

SERVERSH_BACKUP_REDIS_ENABLE=false
SERVERSH_BACKUP_REDIS_CONFIG_PATH=/etc/redis/redis.conf

# Disaster Recovery
SERVERSH_DISASTER_RECOVERY_ENABLE=false
SERVERSH_DISASTER_RECOVERY_SCHEDULE="0 3 1 * *"
SERVERSH_DISASTER_RECOVERY_RETENTION_DAYS=90

# Backup Monitoring
SERVERSH_BACKUP_MONITORING_ENABLE=false
SERVERSH_BACKUP_ALERT_ON_FAILURE=true
SERVERSH_BACKUP_ALERT_ON_SIZE_CHANGE=false
SERVERSH_BACKUP_SIZE_CHANGE_THRESHOLD=50

# Backup Performance
SERVERSH_BACKUP_BANDWIDTH_LIMIT=0
SERVERSH_BACKUP_NICE_LEVEL=10
SERVERSH_BACKUP_MAX_SIZE_GB=10

# =============================================================================
# BENACHRICHTIGUNGEN
# =============================================================================

# E-Mail Benachrichtigungen
SERVERSH_EMAIL_ENABLE=false
SERVERSH_EMAIL_SMTP_HOST=smtp.example.com
SERVERSH_EMAIL_SMTP_PORT=587
SERVERSH_EMAIL_USER=noreply@example.com
SERVERSH_EMAIL_PASSWORD=emailpassword
SERVERSH_EMAIL_FROM=ServerSH <noreply@example.com>
SERVERSH_EMAIL_TO=admin@example.com

# Slack Benachrichtigungen
SERVERSH_SLACK_ENABLE=false
SERVERSH_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...

# =============================================================================
# DOCKER COMPOSE DIENSTE (optional)
# =============================================================================

# Traefik Reverse Proxy
SERVERSH_TRAEFIK_ENABLE=false
SERVERSH_TRAEFIK_PORT=8080
SERVERSH_TRAEFIK_DASHBOARD=true

# Portainer
SERVERSH_PORTAINER_ENABLE=false
SERVERSH_PORTAINER_PORT=9000

# Nginx Proxy Manager
SERVERSH_NGINX_PROXY_ENABLE=false
SERVERSH_NGINX_PROXY_PORT=8081

# =============================================================================
# OPTIONALE SOFTWARE KONFIGURATION
# =============================================================================

# Tailscale VPN
SERVERSH_INSTALL_TAILSCALE=true
SERVERSH_TAILSCALE_LOGIN_METHOD=interactive
SERVERSH_TAILSCALE_AUTH_KEY=""
SERVERSH_TAILSCALE_ARGS="--accept-dns=false --accept-routes=true"

# Tailscale SSH Zugang
SERVERSH_TAILSCALE_SSH=true
SERVERSH_TAILSCALE_SSH_KEY=""

# Tailscale MagicDNS
SERVERSH_TAILSCALE_MAGICDNS=true

# Entwicklungstools
SERVERSH_INSTALL_DEV_TOOLS=false
SERVERSH_DEV_PACKAGES="build-essential,python3,python3-pip,nodejs,npm,yarn"

# System-Utilities
SERVERSH_INSTALL_UTILITIES=true
SERVERSH_UTILITY_PACKAGES="htop,vim,git,curl,wget,unzip,tree,ncdu,rsync,netcat-openbsd,zip,jq"

# Docker Extras
SERVERSH_INSTALL_DOCKER_EXTRAS=false
SERVERSH_DOCKER_EXTRAS="docker-compose,ctop"

# Monitoring Tools
SERVERSH_INSTALL_MONITORING_TOOLS=false
SERVERSH_MONITORING_PACKAGES="iotop,nethogs,sysstat,lm-sensors,atop"

# Shell Environment
SERVERSH_SETUP_ALIASES=true

# =============================================================================
# ENTWICKLUNGS-UMGEBUNG
# =============================================================================

# Debug Einstellungen
SERVERSH_DEBUG=false
SERVERSH_VERBOSE_OUTPUT=false
SERVERSH_TIMING=false

# Test-Konfiguration
SERVERSH_TEST_MODE=false
SERVERSH_TEST_USER=testuser
SERVERSH_TEST_KEEP_CHANGES=false